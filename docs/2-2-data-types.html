<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Piecemeal R</title>
  <meta name="description" content="This is a R tutorial.">
  <meta name="generator" content="bookdown 0.3.14 and GitBook 2.6.7">

  <meta property="og:title" content="Piecemeal R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a R tutorial." />
  <meta name="github-repo" content="/kotamine/piecemealR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Piecemeal R" />
  
  <meta name="twitter:description" content="This is a R tutorial." />
  

<meta name="author" content="Kota Minegishi">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="2-1-cheatsheets.html">
<link rel="next" href="2-3-programming.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.8/htmlwidgets.js"></script>
<script src="libs/datatables-binding-0.2/datatables.js"></script>
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="about.html"><a href="about.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="1-intro.html"><a href="1-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="1-1-materials.html"><a href="1-1-materials.html"><i class="fa fa-check"></i><b>1.1</b> Materials</a></li>
<li class="chapter" data-level="1.2" data-path="1-2-arts-carfts.html"><a href="1-2-arts-carfts.html"><i class="fa fa-check"></i><b>1.2</b> Arts &amp; Carfts</a><ul>
<li class="chapter" data-level="" data-path="1-2-arts-carfts.html"><a href="1-2-arts-carfts.html#crafts"><i class="fa fa-check"></i>Crafts</a></li>
<li class="chapter" data-level="" data-path="1-2-arts-carfts.html"><a href="1-2-arts-carfts.html#arts"><i class="fa fa-check"></i>Arts</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="1-3-huning-down-numbers.html"><a href="1-3-huning-down-numbers.html"><i class="fa fa-check"></i><b>1.3</b> Huning down numbers</a></li>
<li class="chapter" data-level="1.4" data-path="1-4-reflections.html"><a href="1-4-reflections.html"><i class="fa fa-check"></i><b>1.4</b> Reflections</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-essentials.html"><a href="2-essentials.html"><i class="fa fa-check"></i><b>2</b> Essentials</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-cheatsheets.html"><a href="2-1-cheatsheets.html"><i class="fa fa-check"></i><b>2.1</b> Cheatsheets</a></li>
<li class="chapter" data-level="2.2" data-path="2-2-data-types.html"><a href="2-2-data-types.html"><i class="fa fa-check"></i><b>2.2</b> Data types</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-2-data-types.html"><a href="2-2-data-types.html#atomic"><i class="fa fa-check"></i><b>2.2.1</b> Atomic</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-2-data-types.html"><a href="2-2-data-types.html#factor"><i class="fa fa-check"></i><b>2.2.2</b> Factor</a></li>
<li class="chapter" data-level="2.2.3" data-path="2-2-data-types.html"><a href="2-2-data-types.html#matrix"><i class="fa fa-check"></i><b>2.2.3</b> Matrix</a></li>
<li class="chapter" data-level="2.2.4" data-path="2-2-data-types.html"><a href="2-2-data-types.html#data-frame"><i class="fa fa-check"></i><b>2.2.4</b> Data Frame</a></li>
<li class="chapter" data-level="2.2.5" data-path="2-2-data-types.html"><a href="2-2-data-types.html#list"><i class="fa fa-check"></i><b>2.2.5</b> List</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-3-programming.html"><a href="2-3-programming.html"><i class="fa fa-check"></i><b>2.3</b> Programming</a><ul>
<li class="chapter" data-level="2.3.1" data-path="2-3-programming.html"><a href="2-3-programming.html#operator"><i class="fa fa-check"></i><b>2.3.1</b> Operator</a></li>
<li class="chapter" data-level="2.3.2" data-path="2-3-programming.html"><a href="2-3-programming.html#if-else"><i class="fa fa-check"></i><b>2.3.2</b> If else</a></li>
<li class="chapter" data-level="2.3.3" data-path="2-3-programming.html"><a href="2-3-programming.html#loop"><i class="fa fa-check"></i><b>2.3.3</b> Loop</a></li>
<li class="chapter" data-level="2.3.4" data-path="2-3-programming.html"><a href="2-3-programming.html#function"><i class="fa fa-check"></i><b>2.3.4</b> Function</a></li>
<li class="chapter" data-level="2.3.5" data-path="2-3-programming.html"><a href="2-3-programming.html#environment"><i class="fa fa-check"></i><b>2.3.5</b> Environment</a></li>
<li class="chapter" data-level="2.3.6" data-path="2-3-programming.html"><a href="2-3-programming.html#debugging"><i class="fa fa-check"></i><b>2.3.6</b> Debugging</a></li>
<li class="chapter" data-level="2.3.7" data-path="2-3-programming.html"><a href="2-3-programming.html#stat-func."><i class="fa fa-check"></i><b>2.3.7</b> Stat func.</a></li>
<li class="chapter" data-level="2.3.8" data-path="2-3-programming.html"><a href="2-3-programming.html#string-func."><i class="fa fa-check"></i><b>2.3.8</b> String func.</a></li>
<li class="chapter" data-level="2.3.9" data-path="2-3-programming.html"><a href="2-3-programming.html#set-func."><i class="fa fa-check"></i><b>2.3.9</b> Set func.</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="2-4-housekeeping.html"><a href="2-4-housekeeping.html"><i class="fa fa-check"></i><b>2.4</b> Housekeeping</a><ul>
<li class="chapter" data-level="2.4.1" data-path="2-4-housekeeping.html"><a href="2-4-housekeeping.html#working-directory"><i class="fa fa-check"></i><b>2.4.1</b> Working directory</a></li>
<li class="chapter" data-level="2.4.2" data-path="2-4-housekeeping.html"><a href="2-4-housekeeping.html#r-session"><i class="fa fa-check"></i><b>2.4.2</b> R session</a></li>
<li class="chapter" data-level="2.4.3" data-path="2-4-housekeeping.html"><a href="2-4-housekeeping.html#save-load"><i class="fa fa-check"></i><b>2.4.3</b> Save &amp; load</a></li>
<li class="chapter" data-level="2.4.4" data-path="2-4-housekeeping.html"><a href="2-4-housekeeping.html#input-output"><i class="fa fa-check"></i><b>2.4.4</b> Input &amp; Output</a></li>
<li class="chapter" data-level="2.4.5" data-path="2-4-housekeeping.html"><a href="2-4-housekeeping.html#updating"><i class="fa fa-check"></i><b>2.4.5</b> Updating</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-piecemeal-top.html"><a href="3-piecemeal-top.html"><i class="fa fa-check"></i><b>3</b> Piecemeal Topics</a><ul>
<li class="chapter" data-level="3.1" data-path="3-1-dplyr.html"><a href="3-1-dplyr.html"><i class="fa fa-check"></i><b>3.1</b> Unusual Deaths in Mexico</a><ul>
<li class="chapter" data-level="" data-path="3-1-dplyr.html"><a href="3-1-dplyr.html#materials-1"><i class="fa fa-check"></i>Materials</a></li>
<li class="chapter" data-level="" data-path="3-1-dplyr.html"><a href="3-1-dplyr.html#arts-crafts"><i class="fa fa-check"></i>Arts &amp; Crafts</a></li>
<li class="chapter" data-level="" data-path="3-1-dplyr.html"><a href="3-1-dplyr.html#exercise"><i class="fa fa-check"></i>Exercise</a></li>
<li class="chapter" data-level="" data-path="3-1-dplyr.html"><a href="3-1-dplyr.html#the-key"><i class="fa fa-check"></i>The Key</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-2-next.html"><a href="3-2-next.html"><i class="fa fa-check"></i><b>3.2</b> Upcoming topics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-resources.html"><a href="4-resources.html"><i class="fa fa-check"></i><b>4</b> Resources</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Piecemeal R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-types" class="section level2">
<h2><span class="header-section-number">2.2</span> Data types</h2>
<div id="atomic" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Atomic</h3>
<p>In most cases, each atomic element has a type (mode) of;</p>
<ul>
<li><p><code>numeric</code>: number</p></li>
<li><p><code>logical</code>: TRUE or FALSE (T or F for shortcuts)</p></li>
<li><p><code>character</code>: character string</p></li>
<li><p><code>factor</code>: a level of categorical variable</p></li>
</ul>
<p>Other types include <a href="http://www.statmethods.net/input/dates.html">date</a> and nonexistent <code>NULL</code>. The factor is also a <em>class</em> of its own, meaning that many R functions apply operations that are specific to the <em>factor class</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># assess objects 123, &quot;abc&quot;, and TRUE for their types </span>
<span class="kw">str</span>(<span class="dv">123</span>)  <span class="co"># str() returns the structure</span></code></pre></div>
<pre><code>##  num 123</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="st">&quot;abc&quot;</span>)</code></pre></div>
<pre><code>##  chr &quot;abc&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="ot">TRUE</span>)</code></pre></div>
<pre><code>##  logi TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="kw">is.numeric</span>(<span class="dv">123</span>), <span class="kw">is.numeric</span>(<span class="st">&quot;abc&quot;</span>), <span class="kw">is.numeric</span>(<span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="kw">is.logical</span>(<span class="dv">123</span>), <span class="kw">is.logical</span>(<span class="st">&quot;abc&quot;</span>), <span class="kw">is.logical</span>(<span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="kw">is.character</span>(<span class="dv">123</span>), <span class="kw">is.character</span>(<span class="st">&quot;abc&quot;</span>), <span class="kw">is.character</span>(<span class="ot">TRUE</span>))</code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># &quot;&lt;-&quot; means an assignment from right to left</span>
factor1 &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)) <span class="co"># Looks like numeric but not</span>
factor1</code></pre></div>
<pre><code>## [1] 1 2 3
## Levels: 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">factor2 &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>))  <span class="co"># Looks like characters but not</span>
factor2</code></pre></div>
<pre><code>## [1] a b c
## Levels: a b c</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">factor3 &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">FALSE</span>,T)) <span class="co"># Looks like logicals but not</span>
factor3</code></pre></div>
<pre><code>## [1] TRUE  FALSE TRUE 
## Levels: FALSE TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="kw">is.factor</span>(factor1[<span class="dv">1</span>]), <span class="kw">is.factor</span>(factor2[<span class="dv">1</span>]), <span class="kw">is.factor</span>(factor3[<span class="dv">1</span>]))</code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Extract the first element (factor1[1] etc.) </span>
factor1[<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] 1
## Levels: 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">factor2[<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] b
## Levels: a b c</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">factor3[<span class="dv">3</span>]</code></pre></div>
<pre><code>## [1] TRUE
## Levels: FALSE TRUE</code></pre>
<p><code>NULL</code> has zero-length. Also, empty numeric, logical, and character objects have zero-length.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="ot">NULL</span>) </code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">numeric</span>(<span class="dv">0</span>))  <span class="co"># numeric(N) returns a vector of N zeros </span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">logical</span>(<span class="dv">0</span>))  <span class="co"># logical(N) returns a vector of N FALSE objects</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">character</span>(<span class="dv">0</span>)) <span class="co"># character(N) returns a vector of N &quot;&quot; objects</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>Each <strong>vector</strong> has a type of <code>numeric</code>, <code>logical</code>, <code>character</code>, or <code>factor</code>. Each <strong>matrix</strong> has a type of <code>numeric</code>, <code>logical</code>, or <code>character</code>. A <strong>data frame</strong> can contain mixed types across columns where each column (e.g., a variable) has a type of <code>numeric</code>, <code>logical</code>, <code>character</code> or <code>factor</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vector1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># read as numeric</span>
vector1</code></pre></div>
<pre><code>## [1]  1 NA  2  3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vector2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, T, F) <span class="co"># read as logical</span>
vector2</code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vector3 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="st">&quot;abc&quot;</span>, <span class="ot">TRUE</span>, <span class="st">&quot;TRUE&quot;</span>) <span class="co"># read as character</span>
vector3</code></pre></div>
<pre><code>## [1] &quot;1&quot;    NA     &quot;abc&quot;  &quot;TRUE&quot; &quot;TRUE&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vector4 &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="st">&quot;abc&quot;</span>, <span class="ot">TRUE</span>, <span class="st">&quot;TRUE&quot;</span>)) <span class="co"># read as factor </span>
vector4</code></pre></div>
<pre><code>## [1] 1    &lt;NA&gt; abc  TRUE TRUE
## Levels: 1 abc TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matrix1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">3</span>) <span class="co"># read as numeric</span>
matrix1</code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matrix2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">FALSE</span>,<span class="kw">rep</span>(T,<span class="dv">3</span>),F), <span class="dt">nrow =</span> <span class="dv">3</span>)  <span class="co"># read as logical</span>
matrix2</code></pre></div>
<pre><code>##       [,1]  [,2]
## [1,]  TRUE  TRUE
## [2,] FALSE  TRUE
## [3,]  TRUE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">matrix3 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;abc&quot;</span>), <span class="dt">nrow =</span> <span class="dv">3</span>) <span class="co"># read as character</span>
matrix3</code></pre></div>
<pre><code>##      [,1] [,2] 
## [1,] &quot;1&quot;  &quot;a&quot;  
## [2,] &quot;2&quot;  &quot;b&quot;  
## [3,] &quot;3&quot;  &quot;abc&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
        <span class="dt">num  =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),           <span class="co"># read as numeric</span>
        <span class="dt">fac1 =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;abc&quot;</span>),   <span class="co"># read as factor</span>
        <span class="dt">logi =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, T),  <span class="co"># read as logical</span>
        <span class="dt">fac2  =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="st">&quot;a&quot;</span>,<span class="ot">TRUE</span>)      <span class="co"># read as factor</span>
       )  
df1</code></pre></div>
<pre><code>##   num fac1  logi fac2
## 1   1    a  TRUE    1
## 2   2    b FALSE    a
## 3   3  abc  TRUE TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1$num   <span class="co"># &quot;$&quot; symbol is used to extract a column </span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1$fac1  <span class="co"># character type is converted into a factor </span></code></pre></div>
<pre><code>## [1] a   b   abc
## Levels: a abc b</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1$logi</code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df1$fac2  <span class="co"># mixed types within a column is converted into a factor</span></code></pre></div>
<pre><code>## [1] 1    a    TRUE
## Levels: 1 a TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># additional argument &quot;stringsAsFactors = FALSE&quot; preserves character types.</span>
df2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
        <span class="dt">num  =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),           <span class="co"># read as numeric</span>
        <span class="dt">char =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;abc&quot;</span>),   <span class="co"># read as character</span>
        <span class="dt">logi =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, T),  <span class="co"># read as logical</span>
        <span class="dt">fac2  =</span> <span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="st">&quot;a&quot;</span>,<span class="ot">TRUE</span>)),      <span class="co"># read as factor</span>
        <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>
       )  
df2</code></pre></div>
<pre><code>##   num char  logi fac2
## 1   1    a  TRUE    1
## 2   2    b FALSE    a
## 3   3  abc  TRUE TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df2$num  </code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df2$char</code></pre></div>
<pre><code>## [1] &quot;a&quot;   &quot;b&quot;   &quot;abc&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df2$logi</code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df2$fac2</code></pre></div>
<pre><code>## [1] 1    a    TRUE
## Levels: 1 a TRUE</code></pre>
</div>
<div id="factor" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Factor</h3>
<p>A factor object is defined with a set of categorical levels, which may be labeled. The levels are either <strong>ordered</strong> (defined by <code>ordered()</code>) or <strong>unordered</strong> (defined by <code>factor()</code>). Ordered factor objects are treated in the specific order by certain statistical and graphical procedures.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># We will convert the columns of df into factors   </span>
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
      <span class="dt">fac1 =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>),
      <span class="dt">fac2 =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>),
      <span class="dt">fac3 =</span> <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>)
      )

<span class="co"># convert fac1 to ordered factors</span>
df$fac1 &lt;-<span class="st"> </span><span class="kw">ordered</span>(df$fac1,
                  <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>) <span class="co"># defines the order</span>
                  ) 
df$fac1</code></pre></div>
<pre><code>## [1] 0 1 1 4 4 2 2 3
## Levels: 0 &lt; 4 &lt; 3 &lt; 2 &lt; 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(df$fac1)  <span class="co"># gives the table of counts for each level</span></code></pre></div>
<pre><code>## 0 4 3 2 1 
## 1 2 1 2 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># convert fac2 to unordered factors with labels</span>
df$fac2 &lt;-<span class="st"> </span><span class="kw">factor</span>(df$fac2,
                  <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="co">#  no particular order</span>
                  <span class="co"># attach labels to factors: 1=red, 2=blue, 3=green</span>
                  <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;green&quot;</span>)
                  ) 
df$fac2</code></pre></div>
<pre><code>## [1] red   blue  green red   red   blue  blue  green
## Levels: red blue green</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(df$fac2)                </code></pre></div>
<pre><code>##   red  blue green 
##     3     3     2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># convert fac3 to ordered factors with labels</span>
df$fac3 &lt;-<span class="st"> </span><span class="kw">ordered</span>(df$fac3,
                  <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),
                  <span class="co"># attach labels to factors: 2=Low, 3=Medium, 4=High</span>
                  <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Low&quot;</span>, <span class="st">&quot;Medium&quot;</span>, <span class="st">&quot;High&quot;</span>)
                  ) 
df$fac3</code></pre></div>
<pre><code>## [1] High   Low    Medium High   High   Low    Low    Medium
## Levels: Low &lt; Medium &lt; High</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(df$fac3)</code></pre></div>
<pre><code>##    Low Medium   High 
##      3      2      3</code></pre>
</div>
<div id="matrix" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Matrix</h3>
<p><code>matrix()</code> defines a matrix from a vector. The default is to arrange the vector by column (<code>byrow = FALSE</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># byrow = FALSE  (the default)</span>
<span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">FALSE</span>, <span class="dt">dimnames =</span> <span class="ot">NULL</span>)</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># byrow = TRUE </span>
<span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>, <span class="dt">dimnames =</span> <span class="ot">NULL</span>)</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># give row and column names to a matrix </span>
mat1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">FALSE</span>, 
       <span class="dt">dimnames =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;r1&quot;</span>,<span class="st">&quot;r2&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;c1&quot;</span>,<span class="st">&quot;c2&quot;</span>,<span class="st">&quot;c3&quot;</span>)))
mat1</code></pre></div>
<pre><code>##    c1 c2 c3
## r1  1  3  5
## r2  2  4  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(mat1)  <span class="co"># dimension: row by column</span></code></pre></div>
<pre><code>## [1] 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(mat1)</code></pre></div>
<pre><code>## [1] &quot;c1&quot; &quot;c2&quot; &quot;c3&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rownames</span>(mat1)</code></pre></div>
<pre><code>## [1] &quot;r1&quot; &quot;r2&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(mat1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;v1&quot;</span>,<span class="st">&quot;v2&quot;</span>,<span class="st">&quot;v3&quot;</span>)  <span class="co"># change column names by assignment &quot;&lt;-&quot; </span>
mat1</code></pre></div>
<pre><code>##    v1 v2 v3
## r1  1  3  5
## r2  2  4  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># R makes a guess when only nrow or ncol is supplied</span>
<span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">6</span>), <span class="dt">ncol =</span> <span class="dv">3</span>)</code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># combine matrices by column via &quot;cbind()&quot; or by row via &quot;rbind()&quot;</span>
<span class="kw">cbind</span>(mat1,mat1)</code></pre></div>
<pre><code>##    v1 v2 v3 v1 v2 v3
## r1  1  3  5  1  3  5
## r2  2  4  6  2  4  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rbind</span>(mat1,mat1)</code></pre></div>
<pre><code>##    v1 v2 v3
## r1  1  3  5
## r2  2  4  6
## r1  1  3  5
## r2  2  4  6</code></pre>
<p>There are recycling rules in R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># the vector shorter than the length of all elements of a matrix</span>
<span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">4</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol=</span> <span class="dv">3</span>)</code></pre></div>
<pre><code>## Warning in matrix(data = c(1:4), nrow = 2, ncol = 3): data length [4] is
## not a sub-multiple or multiple of the number of columns [3]</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    1
## [2,]    2    4    2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># R treats a scaler as a vector of length that conforms cbind() or rbind()  </span>
<span class="kw">cbind</span>(mat1, <span class="dt">colA =</span> <span class="dv">1</span>)</code></pre></div>
<pre><code>##    v1 v2 v3 colA
## r1  1  3  5    1
## r2  2  4  6    1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rbind</span>(mat1, <span class="dt">rowA=</span> <span class="dv">1</span>, <span class="dt">rowB=</span> <span class="dv">2</span>, <span class="dt">rowC=</span> <span class="dv">3</span>)</code></pre></div>
<pre><code>##      v1 v2 v3
## r1    1  3  5
## r2    2  4  6
## rowA  1  1  1
## rowB  2  2  2
## rowC  3  3  3</code></pre>
<p>To replace elements of a matrix, we can use assignment operator <code>&lt;-</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[<span class="dv">1</span>,<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">10</span>
mat1</code></pre></div>
<pre><code>##    v1 v2 v3
## r1 10  3  5
## r2  2  4  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[,<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">8</span>)
mat1</code></pre></div>
<pre><code>##    v1 v2 v3
## r1 10  7  5
## r2  2  8  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[,<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">0</span>  <span class="co"># recycling rule</span>
mat1</code></pre></div>
<pre><code>##    v1 v2 v3
## r1  0  7  5
## r2  0  8  6</code></pre>
<p>Matrix allows for easy extraction for rows and columns separated by comma.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1</code></pre></div>
<pre><code>##    v1 v2 v3
## r1  0  7  5
## r2  0  8  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[<span class="dv">1</span>, ]  <span class="co"># row = 1 and all columns</span></code></pre></div>
<pre><code>## v1 v2 v3 
##  0  7  5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[, <span class="dv">1</span>]  <span class="co"># all rows and col = 1 </span></code></pre></div>
<pre><code>## r1 r2 
##  0  0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[<span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">FALSE</span>),]  <span class="co"># by a logical vector </span></code></pre></div>
<pre><code>## v1 v2 v3 
##  0  7  5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[, <span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">FALSE</span>)]</code></pre></div>
<pre><code>##    v1 v3
## r1  0  5
## r2  0  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[<span class="dv">2</span>,<span class="dv">3</span>]  <span class="co"># row = 2 and col = 3</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[<span class="dv">1</span>:<span class="dv">2</span>, <span class="dv">2</span>:<span class="dv">3</span>]  <span class="co"># row = 1:2 and col = 2:3</span></code></pre></div>
<pre><code>##    v2 v3
## r1  7  5
## r2  8  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[<span class="dv">1</span>:<span class="dv">2</span>, <span class="dv">2</span>:<span class="dv">3</span>][<span class="dv">2</span>,<span class="dv">2</span>]  <span class="co"># subset of a subset</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[, <span class="dv">1</span>][<span class="dv">2</span>]  <span class="co"># vector extraction is done with one-dimensional index  </span></code></pre></div>
<pre><code>## r2 
##  0</code></pre>
<p>Important: when a single row or column is extracted, it gets converted to a vector with no dimension.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[<span class="dv">1</span>,]</code></pre></div>
<pre><code>## v1 v2 v3 
##  0  7  5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.matrix</span>(mat1[<span class="dv">1</span>, ])  </code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(mat1[<span class="dv">1</span>,])</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(mat1[<span class="dv">1</span>, ])  </code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># to keep a row or column vector structure, use drop = FALSE</span>
mat1[<span class="dv">1</span>,, drop =<span class="st"> </span><span class="ot">FALSE</span>]</code></pre></div>
<pre><code>##    v1 v2 v3
## r1  0  7  5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.matrix</span>(mat1[<span class="dv">1</span>,,<span class="dt">drop =</span> <span class="ot">FALSE</span>])  </code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(mat1[<span class="dv">1</span>,,<span class="dt">drop =</span> <span class="ot">FALSE</span>])</code></pre></div>
<pre><code>## [1] 1 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(mat1[<span class="dv">1</span>,,<span class="dt">drop =</span> <span class="ot">FALSE</span>])  </code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[,<span class="dv">1</span>, drop =<span class="st"> </span><span class="ot">FALSE</span>]</code></pre></div>
<pre><code>##    v1
## r1  0
## r2  0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.matrix</span>(mat1[,<span class="dv">1</span>,<span class="dt">drop =</span> <span class="ot">FALSE</span>])  </code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(mat1[,<span class="dv">1</span>,<span class="dt">drop =</span> <span class="ot">FALSE</span>])</code></pre></div>
<pre><code>## [1] 2 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(mat1[,<span class="dv">1</span>,<span class="dt">drop =</span> <span class="ot">FALSE</span>])  </code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Another way of extraction from a matrix is to use row or column names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[,<span class="st">&#39;v1&#39;</span>]</code></pre></div>
<pre><code>## r1 r2 
##  0  0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[,<span class="kw">c</span>(<span class="st">&#39;v1&#39;</span>,<span class="st">&#39;v3&#39;</span>)]</code></pre></div>
<pre><code>##    v1 v3
## r1  0  5
## r2  0  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1[<span class="st">&#39;r2&#39;</span>,,drop=<span class="st"> </span><span class="ot">FALSE</span>]</code></pre></div>
<pre><code>##    v1 v2 v3
## r2  0  8  6</code></pre>
<p><code>apply()</code> applies a function for a specified margin (dimension index number) of the matrix.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mat1</code></pre></div>
<pre><code>##    v1 v2 v3
## r1  0  7  5
## r2  0  8  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(mat1,<span class="dv">1</span>,mean)  <span class="co"># dimension 1 (across rows)</span></code></pre></div>
<pre><code>##       r1       r2 
## 4.000000 4.666667</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(mat1,<span class="dv">2</span>,mean)  <span class="co"># dimension 2 (across columns)</span></code></pre></div>
<pre><code>##  v1  v2  v3 
## 0.0 7.5 5.5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># one can write a custom function inside apply(). (called annonymous function)    </span>
<span class="co"># Its argument corresponds to the row or column vector passed by apply(). </span>
<span class="kw">apply</span>(mat1,<span class="dv">2</span>, function(x) <span class="kw">sum</span>(x)/<span class="kw">length</span>(x) )  <span class="co"># x is the internal vector name</span></code></pre></div>
<pre><code>##  v1  v2  v3 
## 0.0 7.5 5.5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ans1 &lt;-<span class="st"> </span><span class="kw">apply</span>(mat1,<span class="dv">2</span>, function(x) {   
                         avg =<span class="st"> </span><span class="kw">mean</span>(x)
                         sd =<span class="st"> </span><span class="kw">sd</span>(x)
                          <span class="co"># return the results as a list</span>
                         <span class="kw">list</span>(<span class="dt">Avg =</span> avg, <span class="dt">Sd =</span> sd)
                      }
        )

<span class="kw">unlist</span>(ans1[[<span class="dv">2</span>]])  <span class="co"># results for the second column  </span></code></pre></div>
<pre><code>##       Avg        Sd 
## 7.5000000 0.7071068</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unlist</span>(ans1[[<span class="dv">3</span>]])  <span class="co"># results for the third column  </span></code></pre></div>
<pre><code>##       Avg        Sd 
## 5.5000000 0.7071068</code></pre>
<p>Arrays are a generalization of matrices and can be more than 2 dimension.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">array</span>(<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">18</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>))  <span class="co"># dimension 2 by 2 by 3</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    7    9   11
## [2,]    8   10   12
## 
## , , 3
## 
##      [,1] [,2] [,3]
## [1,]   13   15   17
## [2,]   14   16   18</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">array</span>(<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>))  <span class="co"># R recycles the vector </span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## 
## , , 2
## 
##      [,1] [,2] [,3]
## [1,]    7    9    2
## [2,]    8    1    3
## 
## , , 3
## 
##      [,1] [,2] [,3]
## [1,]    4    6    8
## [2,]    5    7    9</code></pre>
</div>
<div id="data-frame" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Data Frame</h3>
<p>A data frame is similar to a matrix, but it accepts multiple types (modes) of variables across columns (e.g., a dataset in typical data analysis programs like SAS, SPSS, Stata etc.). In some cases matrices and data frames may be treated interchangeably, but generally they need to be distinguished. Data manipulation functions are often written for data frames, while some base R functions are written for matrices.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mymat1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">6</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, 
       <span class="dt">dimnames =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;r1&quot;</span>,<span class="st">&quot;r2&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;c1&quot;</span>,<span class="st">&quot;c2&quot;</span>,<span class="st">&quot;c3&quot;</span>))) 
mymat1</code></pre></div>
<pre><code>##    c1 c2 c3
## r1  1  3  5
## r2  2  4  6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(mymat1)</code></pre></div>
<pre><code>## [1] &quot;matrix&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(mymat1)</code></pre></div>
<pre><code>## [1] &quot;c1&quot; &quot;c2&quot; &quot;c3&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(mymat1)</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydf1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
                mymat1, 
                <span class="dt">num  =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),         
                <span class="dt">fac1 =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;abc&quot;</span>),    
                <span class="dt">logi =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), 
                <span class="dt">fac2  =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="st">&quot;a&quot;</span>)   
              )  
mydf1</code></pre></div>
<pre><code>##    c1 c2 c3 num fac1  logi fac2
## r1  1  3  5   1    a  TRUE    1
## r2  2  4  6   2  abc FALSE    a</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(mydf1)</code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">colnames</span>(mydf1)</code></pre></div>
<pre><code>## [1] &quot;c1&quot;   &quot;c2&quot;   &quot;c3&quot;   &quot;num&quot;  &quot;fac1&quot; &quot;logi&quot; &quot;fac2&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(mydf1)   <span class="co"># colnames and names are the same </span></code></pre></div>
<pre><code>## [1] &quot;c1&quot;   &quot;c2&quot;   &quot;c3&quot;   &quot;num&quot;  &quot;fac1&quot; &quot;logi&quot; &quot;fac2&quot;</code></pre>
<p>Extracting elements from a data frame is similar to extracting from a matrix, but there are a few additional methods.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydf1[<span class="dv">1</span>,]   <span class="co"># row = 1 and all columns </span></code></pre></div>
<pre><code>##    c1 c2 c3 num fac1 logi fac2
## r1  1  3  5   1    a TRUE    1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydf1[,<span class="dv">1</span>]   <span class="co"># all rows and col = 1</span></code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># data frame preserves dimension while extracting a row but not a column</span>
<span class="kw">dim</span>(mydf1[<span class="dv">1</span>,])  </code></pre></div>
<pre><code>## [1] 1 7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(mydf1[,<span class="dv">1</span>])  </code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(mydf1[,<span class="dv">1</span>,<span class="dt">drop=</span><span class="ot">FALSE</span>])   <span class="co"># use drop = FALSE to keep a column vector</span></code></pre></div>
<pre><code>## [1] 2 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydf1[,<span class="dv">1</span>,drop=<span class="ot">FALSE</span>]</code></pre></div>
<pre><code>##    c1
## r1  1
## r2  2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydf1[, <span class="kw">c</span>(<span class="st">&#39;c1&#39;</span>,<span class="st">&#39;num&#39;</span>,<span class="st">&#39;logi&#39;</span>)]</code></pre></div>
<pre><code>##    c1 num  logi
## r1  1   1  TRUE
## r2  2   2 FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(mydf1[, <span class="kw">c</span>(<span class="st">&#39;c1&#39;</span>,<span class="st">&#39;num&#39;</span>,<span class="st">&#39;logi&#39;</span>)])</code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># extraction by column name with &quot;$&quot; symbol:  df$varname  </span>
mydf1$c1</code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(mydf1$c1)</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># one can use quote &#39; &#39; or &quot; &quot; as well </span>
mydf1$<span class="st">&#39;c1&#39;</span></code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># similarly, extraction by column name with [[ ]]: df[[&#39;varname&#39;]]    </span>
mydf1[[<span class="st">&#39;c1&#39;</span>]]</code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(mydf1[[<span class="st">&#39;c1&#39;</span>]])</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># or by index </span>
mydf1[[<span class="dv">1</span>]]</code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># [[ ]] method is useful when passing a variable name as a string</span>
set_to_na &lt;-<span class="st"> </span>function(df, var) {
                df[[var]] &lt;-<span class="st"> </span><span class="ot">NA</span>  
                df 
              }
mydf1</code></pre></div>
<pre><code>##    c1 c2 c3 num fac1  logi fac2
## r1  1  3  5   1    a  TRUE    1
## r2  2  4  6   2  abc FALSE    a</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydf2 &lt;-<span class="st"> </span><span class="kw">set_to_na</span>(mydf1, <span class="st">&quot;c2&quot;</span>) 
mydf2</code></pre></div>
<pre><code>##    c1 c2 c3 num fac1  logi fac2
## r1  1 NA  5   1    a  TRUE    1
## r2  2 NA  6   2  abc FALSE    a</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># add a variable </span>
mydf1$newvar &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>)
mydf1</code></pre></div>
<pre><code>##    c1 c2 c3 num fac1  logi fac2 newvar
## r1  1  3  5   1    a  TRUE    1      4
## r2  2  4  6   2  abc FALSE    a      4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydf1$newvar2 &lt;-<span class="st"> </span>mydf1$c2 +<span class="st"> </span>mydf1$c3
mydf1</code></pre></div>
<pre><code>##    c1 c2 c3 num fac1  logi fac2 newvar newvar2
## r1  1  3  5   1    a  TRUE    1      4       8
## r2  2  4  6   2  abc FALSE    a      4      10</code></pre>
<p><code>apply()</code> may not work well with data frames since data frames are not exactly matrices. We can use simplified apply <code>sapply()</code> or list apply <code>lapply()</code> instead.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mydf1 </code></pre></div>
<pre><code>##    c1 c2 c3 num fac1  logi fac2 newvar newvar2
## r1  1  3  5   1    a  TRUE    1      4       8
## r2  2  4  6   2  abc FALSE    a      4      10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># sapply() </span>
idx_num &lt;-<span class="st"> </span><span class="kw">sapply</span>(mydf1, is.numeric) 
idx_num</code></pre></div>
<pre><code>##      c1      c2      c3     num    fac1    logi    fac2  newvar newvar2 
##    TRUE    TRUE    TRUE    TRUE   FALSE   FALSE   FALSE    TRUE    TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(mydf1[,idx_num], <span class="dv">2</span>, mean)</code></pre></div>
<pre><code>##      c1      c2      c3     num  newvar newvar2 
##     1.5     3.5     5.5     1.5     4.0     9.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(mydf1[,idx_num], mean)</code></pre></div>
<pre><code>##      c1      c2      c3     num  newvar newvar2 
##     1.5     3.5     5.5     1.5     4.0     9.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># lapply() </span>
idx_num2 &lt;-<span class="st"> </span><span class="kw">unlist</span>(<span class="kw">lapply</span>(mydf1, is.numeric)) 
idx_num2</code></pre></div>
<pre><code>##      c1      c2      c3     num    fac1    logi    fac2  newvar newvar2 
##    TRUE    TRUE    TRUE    TRUE   FALSE   FALSE   FALSE    TRUE    TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unlist</span>(<span class="kw">lapply</span>(mydf1[,idx_num2], mean))</code></pre></div>
<pre><code>##      c1      c2      c3     num  newvar newvar2 
##     1.5     3.5     5.5     1.5     4.0     9.0</code></pre>
</div>
<div id="list" class="section level3">
<h3><span class="header-section-number">2.2.5</span> List</h3>
<p>A list is an ordered collection of (possibly unrelated) objects. The objects in a list are referenced by [[1]], [[2]], , or [[var1]], [[var2]],  etc.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">v1 =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),
             <span class="dt">v2 =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>),
             <span class="dt">v3 =</span> <span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;red&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;yellow&quot;</span>)),
             <span class="dt">v4 =</span> <span class="kw">data.frame</span>( <span class="dt">u1 =</span> <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">3</span>), <span class="dt">u2 =</span> <span class="kw">c</span>(<span class="st">&quot;p&quot;</span>,<span class="st">&quot;q&quot;</span>,<span class="st">&quot;r&quot;</span>))
             )
mylist1 </code></pre></div>
<pre><code>## $v1
## [1] 1 2 3
## 
## $v2
## [1] &quot;a&quot; &quot;b&quot;
## 
## $v3
## [1] blue   red    orange yellow
## Levels: blue orange red yellow
## 
## $v4
##   u1 u2
## 1  1  p
## 2  2  q
## 3  3  r</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># extraction</span>
mylist1[[<span class="dv">1</span>]]             </code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist1[[<span class="st">&quot;v2&quot;</span>]]             </code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist1$v3      </code></pre></div>
<pre><code>## [1] blue   red    orange yellow
## Levels: blue orange red yellow</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist1$v4$u2</code></pre></div>
<pre><code>## [1] p q r
## Levels: p q r</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># assignment</span>
mylist1$v5 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="ot">NA</span>)
mylist1$v5 </code></pre></div>
<pre><code>## [1] &quot;a&quot; NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># a list can be nested </span>
mylist1$v6 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">y1 =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">9</span>), <span class="dt">y2 =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))
mylist1$v6</code></pre></div>
<pre><code>## $y1
## [1] 2 9
## 
## $y2
## [1] 0 0 0 1</code></pre>
<p><code>lapply()</code> is very versatile since the items in a list can be completely unrelated.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unlist</span>(<span class="kw">lapply</span>(mylist1, class))</code></pre></div>
<pre><code>##           v1           v2           v3           v4           v5 
##    &quot;numeric&quot;  &quot;character&quot;     &quot;factor&quot; &quot;data.frame&quot;  &quot;character&quot; 
##           v6 
##       &quot;list&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unlist</span>(<span class="kw">lapply</span>(mylist1, attributes))  <span class="co"># some variables have attributes</span></code></pre></div>
<pre><code>##    v3.levels1    v3.levels2    v3.levels3    v3.levels4      v3.class 
##        &quot;blue&quot;      &quot;orange&quot;         &quot;red&quot;      &quot;yellow&quot;      &quot;factor&quot; 
##     v4.names1     v4.names2 v4.row.names1 v4.row.names2 v4.row.names3 
##          &quot;u1&quot;          &quot;u2&quot;           &quot;1&quot;           &quot;2&quot;           &quot;3&quot; 
##      v4.class     v6.names1     v6.names2 
##  &quot;data.frame&quot;          &quot;y1&quot;          &quot;y2&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lapply</span>(mylist1, function(x) {
                  if (<span class="kw">is.numeric</span>(x)) <span class="kw">return</span>(<span class="kw">summary</span>(x))
                  if (<span class="kw">is.character</span>(x)) <span class="kw">return</span>(x)
                  if (<span class="kw">is.factor</span>(x)) <span class="kw">return</span>(<span class="kw">table</span>(x))
                  if (<span class="kw">is.data.frame</span>(x)) <span class="kw">return</span>(<span class="kw">head</span>(x))
                  if (<span class="kw">is.list</span>(x)) <span class="kw">return</span>(<span class="kw">unlist</span>(<span class="kw">lapply</span>(x,class)))
                }
)</code></pre></div>
<pre><code>## $v1
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##     1.0     1.5     2.0     2.0     2.5     3.0 
## 
## $v2
## [1] &quot;a&quot; &quot;b&quot;
## 
## $v3
## x
##   blue orange    red yellow 
##      1      1      1      1 
## 
## $v4
##   u1 u2
## 1  1  p
## 2  2  q
## 3  3  r
## 
## $v5
## [1] &quot;a&quot; NA 
## 
## $v6
##        y1        y2 
## &quot;numeric&quot; &quot;numeric&quot;</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="2-1-cheatsheets.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="2-3-programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
